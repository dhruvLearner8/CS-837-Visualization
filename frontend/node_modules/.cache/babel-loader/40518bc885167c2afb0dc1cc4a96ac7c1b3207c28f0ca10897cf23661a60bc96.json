{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhruv\\\\OneDrive\\\\Desktop\\\\CS 837 Information Vis\\\\gdp-pollution-app\\\\frontend\\\\src\\\\components\\\\ScatterPlot.js\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useRef, useState } from 'react';\n// import * as d3 from 'd3';\n\n// const ScatterPlot = ({\n//   data,\n//   selectedYear = 2022,\n//   regionColorMap,\n//   activeRegions,\n//   selectedCountries,\n//   setSelectedCountries\n// }) => {\n//   const svgRef = useRef();\n//   const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });\n\n//   useEffect(() => {\n//     if (!data.length) return;\n\n//     const filteredData = data.filter(d =>\n//       d.year === selectedYear &&\n//       d.entity !== 'World' &&\n//       !d.entity.toLowerCase().includes('income') &&\n//       d.gdp_per_capita > 0 &&\n//       d.co2_emissions_per_capita > 0 &&\n//       d.population > 0\n//     );\n\n//     const width = 900;\n//     const height = 550;\n//     const margin = { top: 40, right: 40, bottom: 60, left: 80 };\n\n//     const svg = d3.select(svgRef.current);\n//     svg.selectAll('*').remove(); // Clear old content\n\n//     const chart = svg\n//       .attr('width', width)\n//       .attr('height', height)\n//       .append('g')\n//       .attr('transform', `translate(${margin.left},${margin.top})`);\n\n//     const innerWidth = width - margin.left - margin.right;\n//     const innerHeight = height - margin.top - margin.bottom;\n\n//     const xScale = d3.scaleLog()\n//       .domain([100, d3.max(filteredData, d => d.gdp_per_capita || 100000)])\n//       .range([0, innerWidth]);\n\n//     const yScale = d3.scaleLog()\n//       .domain([0.1, d3.max(filteredData, d => d.co2_emissions_per_capita || 10)])\n//       .range([innerHeight, 0]);\n\n//     chart.append('g')\n//       .attr('transform', `translate(0, ${innerHeight})`)\n//       .call(d3.axisBottom(xScale).ticks(10, \"~s\"))\n//       .append('text')\n//       .attr('x', innerWidth / 2)\n//       .attr('y', 40)\n//       .attr('fill', '#000')\n//       .attr('text-anchor', 'middle')\n//       .text('GDP per capita (log scale)');\n\n//     chart.append('g')\n//       .call(d3.axisLeft(yScale).ticks(10, \"~s\"))\n//       .append('text')\n//       .attr('transform', 'rotate(-90)')\n//       .attr('x', -innerHeight / 2)\n//       .attr('y', -60)\n//       .attr('fill', '#000')\n//       .attr('text-anchor', 'middle')\n//       .text('CO₂ emissions per capita (log scale)');\n\n//     // RING CIRCLES (outer)\n//     chart.selectAll('circle.ring')\n//       .data(filteredData.filter(d => activeRegions.includes(d.region)))\n//       .enter()\n//       .append('circle')\n//       .attr('class', 'ring')\n//       .attr('cx', d => xScale(d.gdp_per_capita || 100))\n//       .attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1))\n//       .attr('r', d => Math.sqrt(d.population) / 1000 + 4)\n//       .attr('fill', 'none')\n//       .attr('stroke', d => regionColorMap[d.region] || '#000')\n//       .attr('stroke-width', 2)\n//       .attr('opacity', 1);\n\n//     // MAIN CIRCLES\n//     chart.selectAll('circle.bubble')\n//       .data(filteredData)\n//       .enter()\n//       .append('circle')\n//       .attr('class', 'bubble')\n//       .attr('cx', d => xScale(d.gdp_per_capita || 100))\n//       .attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1))\n//       .attr('r', d => {\n//         const baseR = Math.sqrt(d.population) / 1000;\n//         return selectedCountry?.entity === d.entity ? baseR + 4 : baseR;\n//       })\n//       .attr('fill', d => {\n//         if (selectedCountry?.entity === d.entity) {\n//           return d3.color(regionColorMap[d.region]).brighter(0.5);\n//         }\n//         return activeRegions.includes(d.region)\n//           ? regionColorMap[d.region] || '#000'\n//           : '#ccc';\n//       })\n//       .attr('stroke', d =>\n//         selectedCountry?.entity === d.entity ? regionColorMap[d.region] : 'none'\n//       )\n//       .attr('stroke-width', d =>\n//         selectedCountry?.entity === d.entity ? 3 : 0\n//       )\n//       .attr('opacity', 0.85)\n//       .on('mouseover', function (event, d) {\n//         d3.select(this)\n//           .attr('stroke', regionColorMap[d.region] || '#000')\n//           .attr('stroke-width', 3)\n//           .attr('fill', d3.color(regionColorMap[d.region]).brighter(0.5))\n//           .attr('r', Math.sqrt(d.population) / 1000 + 4);\n//       })\n//       .on('mouseout', function (event, d) {\n//         const baseR = Math.sqrt(d.population) / 1000;\n//         d3.select(this)\n//           .attr('r', selectedCountry?.entity === d.entity ? baseR + 4 : baseR)\n//           .attr('stroke', selectedCountry?.entity === d.entity ? regionColorMap[d.region] : 'none')\n//           .attr('stroke-width', selectedCountry?.entity === d.entity ? 3 : 0)\n//           .attr('fill', d => {\n//             if (selectedCountry?.entity === d.entity) {\n//               return d3.color(regionColorMap[d.region]).brighter(0.5);\n//             }\n//             return activeRegions.includes(d.region)\n//               ? regionColorMap[d.region] || '#000'\n//               : '#ccc';\n//           });\n//       })\n//       .on('click', function (event, d) {\n//         event.stopPropagation();\n//         setTooltipPos({ x: event.pageX + 10, y: event.pageY - 28 });\n//         setSelectedCountry(d);\n//       });\n\n//     // Labels\n//     chart.selectAll('text.label').remove();\n//     chart.selectAll('text.label')\n//       .data(filteredData.filter(d => activeRegions.includes(d.region)))\n//       .enter()\n//       .append('text')\n//       .attr('class', 'label')\n//       .attr('x', d => xScale(d.gdp_per_capita || 100))\n//       .attr('y', d => yScale(d.co2_emissions_per_capita || 0.1) - 8)\n//       .text(d => d.entity)\n//       .attr('font-size', '10px')\n//       .attr('fill', d => regionColorMap[d.region] || '#333')\n//       .attr('font-weight', 'bold')\n//       .attr('text-anchor', 'middle');\n//   }, [data, selectedYear, activeRegions, regionColorMap, selectedCountry]);\n\n//   // Deselect on outside click\n//   useEffect(() => {\n//     const handleClickOutside = () => {\n//       setSelectedCountry(null);\n//     };\n//     document.addEventListener('click', handleClickOutside);\n//     return () => document.removeEventListener('click', handleClickOutside);\n//   }, [setSelectedCountry]);\n\n//   return (\n//     <>\n//       <svg ref={svgRef}></svg>\n//       {selectedCountry && (\n//         <div style={{\n//           position: 'absolute',\n//           left: `${tooltipPos.x}px`,\n//           top: `${tooltipPos.y}px`,\n//           background: '#fff',\n//           padding: '10px',\n//           border: '1px solid #ccc',\n//           borderRadius: '6px',\n//           boxShadow: '0 2px 6px rgba(0,0,0,0.15)',\n//           zIndex: 100,\n//           pointerEvents: 'none'\n//         }}>\n//           <strong>{selectedCountry.entity}</strong><br />\n//           Year: {selectedCountry.year}<br />\n//           GDP per capita: ${Math.round(selectedCountry.gdp_per_capita)}<br />\n//           CO₂ per capita: {selectedCountry.co2_emissions_per_capita.toFixed(2)} t<br />\n//           Population: {selectedCountry.population.toLocaleString()}\n//         </div>\n//       )}\n//     </>\n//   );\n// };\n\n// export default ScatterPlot;\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ScatterPlot = ({\n  data,\n  selectedYear = 2022,\n  regionColorMap,\n  activeRegions,\n  selectedCountries,\n  setSelectedCountries\n}) => {\n  _s();\n  const svgRef = useRef();\n  const [bubblePositions, setBubblePositions] = useState([]);\n  useEffect(() => {\n    if (!data.length) return;\n    const filteredData = data.filter(d => d.year === selectedYear && d.entity !== 'World' && !d.entity.toLowerCase().includes('income') && d.gdp_per_capita > 0 && d.co2_emissions_per_capita > 0 && d.population > 0);\n    const width = 900;\n    const height = 550;\n    const margin = {\n      top: 40,\n      right: 40,\n      bottom: 60,\n      left: 80\n    };\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    const chart = svg.attr('width', width).attr('height', height).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    const xScale = d3.scaleLog().domain([100, d3.max(filteredData, d => d.gdp_per_capita || 100000)]).range([0, innerWidth]);\n    const yScale = d3.scaleLog().domain([0.1, d3.max(filteredData, d => d.co2_emissions_per_capita || 10)]).range([innerHeight, 0]);\n    chart.append('g').attr('transform', `translate(0, ${innerHeight})`).call(d3.axisBottom(xScale).ticks(10, \"~s\")).append('text').attr('x', innerWidth / 2).attr('y', 40).attr('fill', '#000').attr('text-anchor', 'middle').text('GDP per capita (log scale)');\n    chart.append('g').call(d3.axisLeft(yScale).ticks(10, \"~s\")).append('text').attr('transform', 'rotate(-90)').attr('x', -innerHeight / 2).attr('y', -60).attr('fill', '#000').attr('text-anchor', 'middle').text('CO₂ emissions per capita (log scale)');\n    const newPositions = [];\n\n    // RING CIRCLES\n    chart.selectAll('circle.ring').data(filteredData.filter(d => activeRegions.includes(d.region))).enter().append('circle').attr('class', 'ring').attr('cx', d => xScale(d.gdp_per_capita || 100)).attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1)).attr('r', d => Math.sqrt(d.population) / 1000 + 4).attr('fill', 'none').attr('stroke', d => regionColorMap[d.region] || '#000').attr('stroke-width', 2).attr('opacity', 1);\n\n    // MAIN CIRCLES\n    chart.selectAll('circle.bubble').data(filteredData).enter().append('circle').attr('class', 'bubble').attr('cx', d => xScale(d.gdp_per_capita || 100)).attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1)).attr('r', d => {\n      const baseR = Math.sqrt(d.population) / 1000;\n      return selectedCountries.some(c => c.entity === d.entity) ? baseR + 4 : baseR;\n    }).attr('fill', d => {\n      if (selectedCountries.some(c => c.entity === d.entity)) {\n        return d3.color(regionColorMap[d.region]).brighter(0.5);\n      }\n      return activeRegions.includes(d.region) ? regionColorMap[d.region] || '#000' : '#ccc';\n    }).attr('stroke', d => selectedCountries.some(c => c.entity === d.entity) ? regionColorMap[d.region] : 'none').attr('stroke-width', d => selectedCountries.some(c => c.entity === d.entity) ? 3 : 0).attr('opacity', 0.85).on('mouseover', function (event, d) {\n      d3.select(this).attr('stroke', regionColorMap[d.region] || '#000').attr('stroke-width', 3).attr('fill', d3.color(regionColorMap[d.region]).brighter(0.5)).attr('r', Math.sqrt(d.population) / 1000 + 4);\n    }).on('mouseout', function (event, d) {\n      const baseR = Math.sqrt(d.population) / 1000;\n      const isSelected = selectedCountries.some(c => c.entity === d.entity);\n      d3.select(this).attr('r', isSelected ? baseR + 4 : baseR).attr('stroke', isSelected ? regionColorMap[d.region] : 'none').attr('stroke-width', isSelected ? 3 : 0).attr('fill', () => {\n        if (isSelected) {\n          return d3.color(regionColorMap[d.region]).brighter(0.5);\n        }\n        return activeRegions.includes(d.region) ? regionColorMap[d.region] || '#000' : '#ccc';\n      });\n    }).on('click', function (event, d) {\n      event.stopPropagation();\n      const isAlreadySelected = selectedCountries.some(c => c.entity === d.entity);\n      const updated = isAlreadySelected ? selectedCountries.filter(c => c.entity !== d.entity) : [...selectedCountries, d];\n      setSelectedCountries(updated);\n    });\n\n    // Labels\n    chart.selectAll('text.label').remove();\n    chart.selectAll('text.label').data(filteredData.filter(d => activeRegions.includes(d.region))).enter().append('text').attr('class', 'label').attr('x', d => xScale(d.gdp_per_capita || 100)).attr('y', d => yScale(d.co2_emissions_per_capita || 0.1) - 8).text(d => d.entity).attr('font-size', '10px').attr('fill', d => regionColorMap[d.region] || '#333').attr('font-weight', 'bold').attr('text-anchor', 'middle');\n\n    // Capture selected bubble positions for cards\n    selectedCountries.forEach(country => {\n      const found = filteredData.find(d => d.entity === country.entity);\n      if (found) {\n        newPositions.push({\n          ...found,\n          x: xScale(found.gdp_per_capita),\n          y: yScale(found.co2_emissions_per_capita)\n        });\n      }\n    });\n    setBubblePositions(newPositions);\n  }, [data, selectedYear, activeRegions, regionColorMap, selectedCountries]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this), bubblePositions.map((d, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        left: `${d.x + 100}px`,\n        top: `${d.y + 40}px`,\n        background: '#fff',\n        padding: '10px',\n        border: '1px solid #ccc',\n        borderRadius: '6px',\n        boxShadow: '0 2px 6px rgba(0,0,0,0.15)',\n        zIndex: 100,\n        pointerEvents: 'none'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: d.entity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 38\n      }, this), \"Year: \", d.year, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 25\n      }, this), \"GDP per capita: $\", Math.round(d.gdp_per_capita), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 58\n      }, this), \"CO\\u2082 per capita: \", d.co2_emissions_per_capita.toFixed(2), \" t\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 68\n      }, this), \"Population: \", d.population.toLocaleString()]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true);\n};\n_s(ScatterPlot, \"uyY+YwGtV7xBowrH9h8D3Oh/YDY=\");\n_c = ScatterPlot;\nexport default ScatterPlot;\nvar _c;\n$RefreshReg$(_c, \"ScatterPlot\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","jsxDEV","_jsxDEV","Fragment","_Fragment","ScatterPlot","data","selectedYear","regionColorMap","activeRegions","selectedCountries","setSelectedCountries","_s","svgRef","bubblePositions","setBubblePositions","length","filteredData","filter","d","year","entity","toLowerCase","includes","gdp_per_capita","co2_emissions_per_capita","population","width","height","margin","top","right","bottom","left","svg","select","current","selectAll","remove","chart","attr","append","innerWidth","innerHeight","xScale","scaleLog","domain","max","range","yScale","call","axisBottom","ticks","text","axisLeft","newPositions","region","enter","Math","sqrt","baseR","some","c","color","brighter","on","event","isSelected","stopPropagation","isAlreadySelected","updated","forEach","country","found","find","push","x","y","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","map","i","style","position","background","padding","border","borderRadius","boxShadow","zIndex","pointerEvents","round","toFixed","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/dhruv/OneDrive/Desktop/CS 837 Information Vis/gdp-pollution-app/frontend/src/components/ScatterPlot.js"],"sourcesContent":["// import React, { useEffect, useRef, useState } from 'react';\r\n// import * as d3 from 'd3';\r\n\r\n// const ScatterPlot = ({\r\n//   data,\r\n//   selectedYear = 2022,\r\n//   regionColorMap,\r\n//   activeRegions,\r\n//   selectedCountries,\r\n//   setSelectedCountries\r\n// }) => {\r\n//   const svgRef = useRef();\r\n//   const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });\r\n\r\n//   useEffect(() => {\r\n//     if (!data.length) return;\r\n\r\n//     const filteredData = data.filter(d =>\r\n//       d.year === selectedYear &&\r\n//       d.entity !== 'World' &&\r\n//       !d.entity.toLowerCase().includes('income') &&\r\n//       d.gdp_per_capita > 0 &&\r\n//       d.co2_emissions_per_capita > 0 &&\r\n//       d.population > 0\r\n//     );\r\n\r\n//     const width = 900;\r\n//     const height = 550;\r\n//     const margin = { top: 40, right: 40, bottom: 60, left: 80 };\r\n\r\n//     const svg = d3.select(svgRef.current);\r\n//     svg.selectAll('*').remove(); // Clear old content\r\n\r\n//     const chart = svg\r\n//       .attr('width', width)\r\n//       .attr('height', height)\r\n//       .append('g')\r\n//       .attr('transform', `translate(${margin.left},${margin.top})`);\r\n\r\n//     const innerWidth = width - margin.left - margin.right;\r\n//     const innerHeight = height - margin.top - margin.bottom;\r\n\r\n//     const xScale = d3.scaleLog()\r\n//       .domain([100, d3.max(filteredData, d => d.gdp_per_capita || 100000)])\r\n//       .range([0, innerWidth]);\r\n\r\n//     const yScale = d3.scaleLog()\r\n//       .domain([0.1, d3.max(filteredData, d => d.co2_emissions_per_capita || 10)])\r\n//       .range([innerHeight, 0]);\r\n\r\n//     chart.append('g')\r\n//       .attr('transform', `translate(0, ${innerHeight})`)\r\n//       .call(d3.axisBottom(xScale).ticks(10, \"~s\"))\r\n//       .append('text')\r\n//       .attr('x', innerWidth / 2)\r\n//       .attr('y', 40)\r\n//       .attr('fill', '#000')\r\n//       .attr('text-anchor', 'middle')\r\n//       .text('GDP per capita (log scale)');\r\n\r\n//     chart.append('g')\r\n//       .call(d3.axisLeft(yScale).ticks(10, \"~s\"))\r\n//       .append('text')\r\n//       .attr('transform', 'rotate(-90)')\r\n//       .attr('x', -innerHeight / 2)\r\n//       .attr('y', -60)\r\n//       .attr('fill', '#000')\r\n//       .attr('text-anchor', 'middle')\r\n//       .text('CO₂ emissions per capita (log scale)');\r\n\r\n//     // RING CIRCLES (outer)\r\n//     chart.selectAll('circle.ring')\r\n//       .data(filteredData.filter(d => activeRegions.includes(d.region)))\r\n//       .enter()\r\n//       .append('circle')\r\n//       .attr('class', 'ring')\r\n//       .attr('cx', d => xScale(d.gdp_per_capita || 100))\r\n//       .attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1))\r\n//       .attr('r', d => Math.sqrt(d.population) / 1000 + 4)\r\n//       .attr('fill', 'none')\r\n//       .attr('stroke', d => regionColorMap[d.region] || '#000')\r\n//       .attr('stroke-width', 2)\r\n//       .attr('opacity', 1);\r\n\r\n//     // MAIN CIRCLES\r\n//     chart.selectAll('circle.bubble')\r\n//       .data(filteredData)\r\n//       .enter()\r\n//       .append('circle')\r\n//       .attr('class', 'bubble')\r\n//       .attr('cx', d => xScale(d.gdp_per_capita || 100))\r\n//       .attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1))\r\n//       .attr('r', d => {\r\n//         const baseR = Math.sqrt(d.population) / 1000;\r\n//         return selectedCountry?.entity === d.entity ? baseR + 4 : baseR;\r\n//       })\r\n//       .attr('fill', d => {\r\n//         if (selectedCountry?.entity === d.entity) {\r\n//           return d3.color(regionColorMap[d.region]).brighter(0.5);\r\n//         }\r\n//         return activeRegions.includes(d.region)\r\n//           ? regionColorMap[d.region] || '#000'\r\n//           : '#ccc';\r\n//       })\r\n//       .attr('stroke', d =>\r\n//         selectedCountry?.entity === d.entity ? regionColorMap[d.region] : 'none'\r\n//       )\r\n//       .attr('stroke-width', d =>\r\n//         selectedCountry?.entity === d.entity ? 3 : 0\r\n//       )\r\n//       .attr('opacity', 0.85)\r\n//       .on('mouseover', function (event, d) {\r\n//         d3.select(this)\r\n//           .attr('stroke', regionColorMap[d.region] || '#000')\r\n//           .attr('stroke-width', 3)\r\n//           .attr('fill', d3.color(regionColorMap[d.region]).brighter(0.5))\r\n//           .attr('r', Math.sqrt(d.population) / 1000 + 4);\r\n//       })\r\n//       .on('mouseout', function (event, d) {\r\n//         const baseR = Math.sqrt(d.population) / 1000;\r\n//         d3.select(this)\r\n//           .attr('r', selectedCountry?.entity === d.entity ? baseR + 4 : baseR)\r\n//           .attr('stroke', selectedCountry?.entity === d.entity ? regionColorMap[d.region] : 'none')\r\n//           .attr('stroke-width', selectedCountry?.entity === d.entity ? 3 : 0)\r\n//           .attr('fill', d => {\r\n//             if (selectedCountry?.entity === d.entity) {\r\n//               return d3.color(regionColorMap[d.region]).brighter(0.5);\r\n//             }\r\n//             return activeRegions.includes(d.region)\r\n//               ? regionColorMap[d.region] || '#000'\r\n//               : '#ccc';\r\n//           });\r\n//       })\r\n//       .on('click', function (event, d) {\r\n//         event.stopPropagation();\r\n//         setTooltipPos({ x: event.pageX + 10, y: event.pageY - 28 });\r\n//         setSelectedCountry(d);\r\n//       });\r\n\r\n//     // Labels\r\n//     chart.selectAll('text.label').remove();\r\n//     chart.selectAll('text.label')\r\n//       .data(filteredData.filter(d => activeRegions.includes(d.region)))\r\n//       .enter()\r\n//       .append('text')\r\n//       .attr('class', 'label')\r\n//       .attr('x', d => xScale(d.gdp_per_capita || 100))\r\n//       .attr('y', d => yScale(d.co2_emissions_per_capita || 0.1) - 8)\r\n//       .text(d => d.entity)\r\n//       .attr('font-size', '10px')\r\n//       .attr('fill', d => regionColorMap[d.region] || '#333')\r\n//       .attr('font-weight', 'bold')\r\n//       .attr('text-anchor', 'middle');\r\n//   }, [data, selectedYear, activeRegions, regionColorMap, selectedCountry]);\r\n\r\n//   // Deselect on outside click\r\n//   useEffect(() => {\r\n//     const handleClickOutside = () => {\r\n//       setSelectedCountry(null);\r\n//     };\r\n//     document.addEventListener('click', handleClickOutside);\r\n//     return () => document.removeEventListener('click', handleClickOutside);\r\n//   }, [setSelectedCountry]);\r\n\r\n//   return (\r\n//     <>\r\n//       <svg ref={svgRef}></svg>\r\n//       {selectedCountry && (\r\n//         <div style={{\r\n//           position: 'absolute',\r\n//           left: `${tooltipPos.x}px`,\r\n//           top: `${tooltipPos.y}px`,\r\n//           background: '#fff',\r\n//           padding: '10px',\r\n//           border: '1px solid #ccc',\r\n//           borderRadius: '6px',\r\n//           boxShadow: '0 2px 6px rgba(0,0,0,0.15)',\r\n//           zIndex: 100,\r\n//           pointerEvents: 'none'\r\n//         }}>\r\n//           <strong>{selectedCountry.entity}</strong><br />\r\n//           Year: {selectedCountry.year}<br />\r\n//           GDP per capita: ${Math.round(selectedCountry.gdp_per_capita)}<br />\r\n//           CO₂ per capita: {selectedCountry.co2_emissions_per_capita.toFixed(2)} t<br />\r\n//           Population: {selectedCountry.population.toLocaleString()}\r\n//         </div>\r\n//       )}\r\n//     </>\r\n//   );\r\n// };\r\n\r\n// export default ScatterPlot;\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nconst ScatterPlot = ({\r\n  data,\r\n  selectedYear = 2022,\r\n  regionColorMap,\r\n  activeRegions,\r\n  selectedCountries,\r\n  setSelectedCountries\r\n}) => {\r\n  const svgRef = useRef();\r\n  const [bubblePositions, setBubblePositions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!data.length) return;\r\n\r\n    const filteredData = data.filter(d =>\r\n      d.year === selectedYear &&\r\n      d.entity !== 'World' &&\r\n      !d.entity.toLowerCase().includes('income') &&\r\n      d.gdp_per_capita > 0 &&\r\n      d.co2_emissions_per_capita > 0 &&\r\n      d.population > 0\r\n    );\r\n\r\n    const width = 900;\r\n    const height = 550;\r\n    const margin = { top: 40, right: 40, bottom: 60, left: 80 };\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    svg.selectAll('*').remove();\r\n\r\n    const chart = svg\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .append('g')\r\n      .attr('transform', `translate(${margin.left},${margin.top})`);\r\n\r\n    const innerWidth = width - margin.left - margin.right;\r\n    const innerHeight = height - margin.top - margin.bottom;\r\n\r\n    const xScale = d3.scaleLog()\r\n      .domain([100, d3.max(filteredData, d => d.gdp_per_capita || 100000)])\r\n      .range([0, innerWidth]);\r\n\r\n    const yScale = d3.scaleLog()\r\n      .domain([0.1, d3.max(filteredData, d => d.co2_emissions_per_capita || 10)])\r\n      .range([innerHeight, 0]);\r\n\r\n    chart.append('g')\r\n      .attr('transform', `translate(0, ${innerHeight})`)\r\n      .call(d3.axisBottom(xScale).ticks(10, \"~s\"))\r\n      .append('text')\r\n      .attr('x', innerWidth / 2)\r\n      .attr('y', 40)\r\n      .attr('fill', '#000')\r\n      .attr('text-anchor', 'middle')\r\n      .text('GDP per capita (log scale)');\r\n\r\n    chart.append('g')\r\n      .call(d3.axisLeft(yScale).ticks(10, \"~s\"))\r\n      .append('text')\r\n      .attr('transform', 'rotate(-90)')\r\n      .attr('x', -innerHeight / 2)\r\n      .attr('y', -60)\r\n      .attr('fill', '#000')\r\n      .attr('text-anchor', 'middle')\r\n      .text('CO₂ emissions per capita (log scale)');\r\n\r\n    const newPositions = [];\r\n\r\n    // RING CIRCLES\r\n    chart.selectAll('circle.ring')\r\n      .data(filteredData.filter(d => activeRegions.includes(d.region)))\r\n      .enter()\r\n      .append('circle')\r\n      .attr('class', 'ring')\r\n      .attr('cx', d => xScale(d.gdp_per_capita || 100))\r\n      .attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1))\r\n      .attr('r', d => Math.sqrt(d.population) / 1000 + 4)\r\n      .attr('fill', 'none')\r\n      .attr('stroke', d => regionColorMap[d.region] || '#000')\r\n      .attr('stroke-width', 2)\r\n      .attr('opacity', 1);\r\n\r\n    // MAIN CIRCLES\r\n    chart.selectAll('circle.bubble')\r\n      .data(filteredData)\r\n      .enter()\r\n      .append('circle')\r\n      .attr('class', 'bubble')\r\n      .attr('cx', d => xScale(d.gdp_per_capita || 100))\r\n      .attr('cy', d => yScale(d.co2_emissions_per_capita || 0.1))\r\n      .attr('r', d => {\r\n        const baseR = Math.sqrt(d.population) / 1000;\r\n        return selectedCountries.some(c => c.entity === d.entity) ? baseR + 4 : baseR;\r\n      })\r\n      .attr('fill', d => {\r\n        if (selectedCountries.some(c => c.entity === d.entity)) {\r\n          return d3.color(regionColorMap[d.region]).brighter(0.5);\r\n        }\r\n        return activeRegions.includes(d.region)\r\n          ? regionColorMap[d.region] || '#000'\r\n          : '#ccc';\r\n      })\r\n      .attr('stroke', d =>\r\n        selectedCountries.some(c => c.entity === d.entity)\r\n          ? regionColorMap[d.region]\r\n          : 'none'\r\n      )\r\n      .attr('stroke-width', d =>\r\n        selectedCountries.some(c => c.entity === d.entity) ? 3 : 0\r\n      )\r\n      .attr('opacity', 0.85)\r\n      .on('mouseover', function (event, d) {\r\n        d3.select(this)\r\n          .attr('stroke', regionColorMap[d.region] || '#000')\r\n          .attr('stroke-width', 3)\r\n          .attr('fill', d3.color(regionColorMap[d.region]).brighter(0.5))\r\n          .attr('r', Math.sqrt(d.population) / 1000 + 4);\r\n      })\r\n      .on('mouseout', function (event, d) {\r\n        const baseR = Math.sqrt(d.population) / 1000;\r\n        const isSelected = selectedCountries.some(c => c.entity === d.entity);\r\n        d3.select(this)\r\n          .attr('r', isSelected ? baseR + 4 : baseR)\r\n          .attr('stroke', isSelected ? regionColorMap[d.region] : 'none')\r\n          .attr('stroke-width', isSelected ? 3 : 0)\r\n          .attr('fill', () => {\r\n            if (isSelected) {\r\n              return d3.color(regionColorMap[d.region]).brighter(0.5);\r\n            }\r\n            return activeRegions.includes(d.region)\r\n              ? regionColorMap[d.region] || '#000'\r\n              : '#ccc';\r\n          });\r\n      })\r\n      .on('click', function (event, d) {\r\n        event.stopPropagation();\r\n        const isAlreadySelected = selectedCountries.some(c => c.entity === d.entity);\r\n        const updated = isAlreadySelected\r\n          ? selectedCountries.filter(c => c.entity !== d.entity)\r\n          : [...selectedCountries, d];\r\n        setSelectedCountries(updated);\r\n      });\r\n\r\n    // Labels\r\n    chart.selectAll('text.label').remove();\r\n    chart.selectAll('text.label')\r\n      .data(filteredData.filter(d => activeRegions.includes(d.region)))\r\n      .enter()\r\n      .append('text')\r\n      .attr('class', 'label')\r\n      .attr('x', d => xScale(d.gdp_per_capita || 100))\r\n      .attr('y', d => yScale(d.co2_emissions_per_capita || 0.1) - 8)\r\n      .text(d => d.entity)\r\n      .attr('font-size', '10px')\r\n      .attr('fill', d => regionColorMap[d.region] || '#333')\r\n      .attr('font-weight', 'bold')\r\n      .attr('text-anchor', 'middle');\r\n\r\n    // Capture selected bubble positions for cards\r\n    selectedCountries.forEach(country => {\r\n      const found = filteredData.find(d => d.entity === country.entity);\r\n      if (found) {\r\n        newPositions.push({\r\n          ...found,\r\n          x: xScale(found.gdp_per_capita),\r\n          y: yScale(found.co2_emissions_per_capita)\r\n        });\r\n      }\r\n    });\r\n\r\n    setBubblePositions(newPositions);\r\n  }, [data, selectedYear, activeRegions, regionColorMap, selectedCountries]);\r\n\r\n  return (\r\n    <>\r\n      <svg ref={svgRef}></svg>\r\n\r\n      {/* Tooltip cards */}\r\n      {bubblePositions.map((d, i) => (\r\n        <div key={i} style={{\r\n          position: 'absolute',\r\n          left: `${d.x + 100}px`,\r\n          top: `${d.y + 40}px`,\r\n          background: '#fff',\r\n          padding: '10px',\r\n          border: '1px solid #ccc',\r\n          borderRadius: '6px',\r\n          boxShadow: '0 2px 6px rgba(0,0,0,0.15)',\r\n          zIndex: 100,\r\n          pointerEvents: 'none'\r\n        }}>\r\n          <strong>{d.entity}</strong><br />\r\n          Year: {d.year}<br />\r\n          GDP per capita: ${Math.round(d.gdp_per_capita)}<br />\r\n          CO₂ per capita: {d.co2_emissions_per_capita.toFixed(2)} t<br />\r\n          Population: {d.population.toLocaleString()}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ScatterPlot;\r\n"],"mappings":";;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAO,KAAKC,EAAE,MAAM,IAAI;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEzB,MAAMC,WAAW,GAAGA,CAAC;EACnBC,IAAI;EACJC,YAAY,GAAG,IAAI;EACnBC,cAAc;EACdC,aAAa;EACbC,iBAAiB;EACjBC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAMC,MAAM,GAAGf,MAAM,CAAC,CAAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}